# 아이템 52 테스팅 타입의 함정에 주의하기

테스트 코드는 반환 타입을 체크하는 것이 훨씬 좋은 코드입니다.

```typescript
const lengths: number[] = map(["john", "paul"], (name) => name.length);
```

이 코드는 불필요한 타입 선언에 해당하지만 테스트 코드 관점에서는 중요한 역할을 하고 있습니다. 반환 타입 보장이 있습니다만 두가지 근본적인 문제가 있긴 합니다.

1. 불필요한 변수를 만들어야 합니다.
   - 일반적인 해결책은 변수를 도입하는 대신 헬퍼 함수를 정의하는 것입니다
     ```typescript
     function assertType<T>(x: T) {}
     assertType<number[]>(map(["john", "paul"], (name) => name.length));
     ```
2. 두 타입이 동일한지 체크하는 것이 아니라 할당 가능성을 체크하고 있습니다.

- 요약
  - 타입을 테스트할 때는 특히 함수 타입의 동일성과 할당 가능성의 차이점을 알고 있어야 합니다
  - 콜백이 있는 함수를 테스트할 때, 콜백 매개변수의 추론된 타입을 체크해야합니다. 또한 this가 API의 일부분이라면 역시 테스트해야 합니다
  - 타입 관련도니 테스트에서 any를 주의해야 합니다. 더 엄격한 테스트를 위해 dtslint같은 도구를 사용하는 것이 좋습니다
